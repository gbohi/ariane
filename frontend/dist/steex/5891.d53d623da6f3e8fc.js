"use strict";(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[5891],{85891:(M,g,d)=>{d.r(g),d.d(g,{MoyensgenerauxModule:()=>Oe});var o=d(60177),a=d(89417),b=d(30803),_=d(62288),e=d(54438),E=d(21626),j=d(26364);function C(l,u){if(1&l&&(e.j41(0,"th"),e.EFF(1),e.k0s()),2&l){const t=u.$implicit;e.R7$(),e.JRh(t)}}function F(l,u){if(1&l&&(e.j41(0,"td"),e.EFF(1),e.k0s()),2&l){const t=u.$implicit,n=e.XpG().$implicit;e.R7$(),e.JRh(n[t])}}function h(l,u){if(1&l&&(e.j41(0,"tr"),e.DNE(1,F,2,1,"td",19),e.k0s()),2&l){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.headers)}}function R(l,u){if(1&l&&(e.j41(0,"table",18)(1,"thead")(2,"tr"),e.DNE(3,C,2,1,"th",19),e.k0s()(),e.j41(4,"tbody"),e.DNE(5,h,2,1,"tr",19),e.k0s()()),2&l){const t=e.XpG();e.R7$(3),e.Y8G("ngForOf",t.headers),e.R7$(2),e.Y8G("ngForOf",t.entretientvehiculesData)}}function L(l,u){1&l&&(e.j41(0,"div",20)(1,"div",21),e.nrm(2,"i",22),e.j41(3,"h5",23),e.EFF(4,"Aucun r\xe9sultat trouv\xe9"),e.k0s(),e.j41(5,"p",24),e.EFF(6,"Nous n'avons trouv\xe9 aucun entretien de v\xe9hicule."),e.k0s()()())}function m(l,u){1&l&&e.nrm(0,"span",25)}function B(l,u){1&l&&e.nrm(0,"i",26)}let p=(()=>{class l{constructor(t){this.http=t,this.breadCrumbItems=[{label:"Moyens g\xe9n\xe9raux",active:!0},{label:"Entretien v\xe9hicule Liste",active:!0}],this.file=null,this.entretientvehiculesData=[],this.headers=[],this.isLoading=!1}onFileChange(t){const n=t.target.files[0];this.file=n;const i=new FileReader;i.onload=s=>{const r=new Uint8Array(s.target.result),c=_.LF(r,{type:"array"}),O="Entretiens";if(c.Sheets[O]){const N=_.Wp.sheet_to_json(c.Sheets[O],{defval:""});this.entretientvehiculesData=N,N.length>0&&(this.headers=Object.keys(N[0]))}else alert('La feuille "Entretiens" est manquante.')},i.readAsArrayBuffer(n)}envoyerDonnees(){if(!this.file)return;this.isLoading=!0;const t=new FormData;t.append("file",this.file),this.http.post("http://localhost:8000/api/api/import-entretien/",t).subscribe({next:n=>{alert("\u2705 Import r\xe9ussi !"),this.file=null,this.entretientvehiculesData=[],this.headers=[],this.isLoading=!1},error:n=>{alert("\u274c Erreur : "+(n.error?.error||"\xe9chec de l'import")),this.isLoading=!1}})}static{this.\u0275fac=function(n){return new(n||l)(e.rXU(E.Qq))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-importer-entretien"]],decls:21,vars:7,consts:[["title","Importer entretien v\xe9hicule",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],["id","platList",1,"card"],[1,"card-header"],[1,"row","align-items-center","gy-3"],[1,"col-lg-12","me-auto","mb-3"],[1,"card-title","mb-0"],["type","file","accept",".xlsx",3,"change"],[1,"col-lg-12","me-auto"],[1,"card-title","mb-1"],[1,"card-body"],[1,"table-responsive"],["class","table table-striped",4,"ngIf"],["class","noresult",4,"ngIf"],[1,"btn","btn-secondary","mt-3",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["class","bi bi-filetype-txt align-baseline me-1",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"noresult"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-filetype-txt","align-baseline","me-1"]],template:function(n,i){1&n&&(e.nrm(0,"app-breadcrumbs",0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h6",7),e.EFF(8,"Veuillez s\xe9lectionner un fichier Excel (.xlsx) svp"),e.k0s(),e.j41(9,"input",8),e.bIt("change",function(r){return i.onFileChange(r)}),e.k0s()(),e.j41(10,"div",9)(11,"h6",10),e.EFF(12,"D\xe9tails des entretiens de v\xe9hicules"),e.k0s()()()(),e.j41(13,"div",11)(14,"div",12),e.DNE(15,R,6,2,"table",13),e.k0s(),e.DNE(16,L,7,0,"div",14),e.j41(17,"button",15),e.bIt("click",function(){return i.envoyerDonnees()}),e.DNE(18,m,1,0,"span",16)(19,B,1,0,"i",17),e.EFF(20),e.k0s()()()()()),2&n&&(e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(15),e.Y8G("ngIf",i.entretientvehiculesData.length),e.R7$(),e.Y8G("ngIf",!i.entretientvehiculesData.length),e.R7$(),e.Y8G("disabled",!i.file||i.isLoading),e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",!i.isLoading),e.R7$(),e.SpI(" ",i.isLoading?"Import en cours...":"Importer les donn\xe9es"," "))},dependencies:[o.Sq,o.bT,j.m]})}}return l})();var v=d(52103),f=d(59640);const k=(0,f.UX)("entretienvehicule"),w=(0,f.Mz)(k,l=>l.entretienvehiculeData),x=(0,f.Mz)(k,l=>l.loading),z=(0,f.Mz)(k,l=>l.totalItems),Y=(0,f.Mz)(k,l=>l.currentPage);(0,f.Mz)(k,l=>l.next),(0,f.Mz)(k,l=>l.previous),(0,f.Mz)(k,l=>l.allEntretienvehicules);var $=d(45794),D=d(23400),T=d(50779);const U=["addEntretienvehicule"],J=["deleteRecordModal"],H=["mainContainer"],X=["viewEntretienvehicule"],Z=(l,u)=>u.id,A=()=>({backdrop:"static",keyboard:!1,ignoreBackdropClick:!0});function Q(l,u){if(1&l){const t=e.RV6();e.j41(0,"tr",29)(1,"td")(2,"div",23)(3,"input",80),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.state,i)||(s.state=i),e.Njj(i)}),e.bIt("change",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onCheckboxChange(i))}),e.k0s(),e.nrm(4,"label",81),e.k0s()(),e.j41(5,"td",82)(6,"a",83),e.EFF(7),e.k0s()(),e.j41(8,"td",84),e.EFF(9),e.k0s(),e.j41(10,"td",85),e.EFF(11),e.k0s(),e.j41(12,"td",86),e.EFF(13),e.k0s(),e.j41(14,"td",87),e.EFF(15),e.k0s(),e.j41(16,"td",88),e.EFF(17),e.k0s(),e.j41(18,"td",89),e.EFF(19),e.k0s(),e.j41(20,"td")(21,"ul",90)(22,"li")(23,"a",91),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.viewDetails(i.id))}),e.nrm(24,"i",92),e.k0s()(),e.j41(25,"li")(26,"a",93),e.bIt("click",function(){const i=e.eBV(t).$index,s=e.XpG();return e.Njj(s.editList(i))}),e.nrm(27,"i",94),e.k0s()(),e.j41(28,"li")(29,"a",95),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.removeItem(i.id))}),e.nrm(30,"i",96),e.k0s()()()()()}if(2&l){const t=u.$implicit;e.Mz_("id","l_",t.id,""),e.R7$(3),e.FS9("value",t.id),e.R50("ngModel",t.state),e.R7$(4),e.SpI("#",t.id,""),e.R7$(2),e.JRh(t.vehicule_detail.immatriculation),e.R7$(2),e.JRh(t.vehicule_detail.description),e.R7$(2),e.JRh(t.periode),e.R7$(2),e.JRh(t.debit),e.R7$(2),e.JRh(t.credit),e.R7$(2),e.JRh(t.solde)}}function W(l,u){1&l&&(e.j41(0,"tr")(1,"td",97),e.nrm(2,"i",98),e.j41(3,"h5",35),e.EFF(4,"Aucun entretien v\xe9hicule disponible"),e.k0s(),e.j41(5,"p",36),e.EFF(6,"Veuillez ajouter un entretien v\xe9hicule pour commencer."),e.k0s()()())}function K(l,u){1&l&&(e.j41(0,"div",99)(1,"div",100)(2,"span",101),e.EFF(3,"Chargement..."),e.k0s()()())}function q(l,u){1&l&&(e.j41(0,"small"),e.EFF(1,"Le libell\xe9 est requis"),e.k0s())}function ee(l,u){if(1&l&&(e.j41(0,"div",102),e.DNE(1,q,2,0,"small",30),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=n.entretienvehiculeForm.get("libelle"))||null==t.errors?null:t.errors.required)}}let te=(()=>{class l{constructor(t,n,i,s){this.formBuilder=t,this.datePipe=n,this.toastService=i,this.store=s,this.entretienvehicules=[],this.entretienvehiculeList=[],this.totalItems=0,this.currentPage=1,this.isLoading=!0,this.submitted=!1,this.files=[],this.checkedValGet=[],this.lastActiveElement=null,this.selectedEntretienvehicule=null,this.direction="asc",this.dropzoneConfig={clickable:!0,addRemoveLinks:!0,previewsContainer:!1},this.uploadedFiles=[]}ngOnInit(){this.breadCrumbItems=[{label:"Entretien v\xe9hicules",active:!0},{label:"Entretien v\xe9hicules List",active:!0}],this.entretienvehiculeForm=this.formBuilder.group({id:[""],libelle:["",[a.k0.required]]}),this.store.select(x).subscribe(t=>{this.isLoading=t,t?document.getElementById("elmLoader")?.classList.remove("d-none"):document.getElementById("elmLoader")?.classList.add("d-none")}),this.store.select(z).subscribe(t=>{this.totalItems=t||0}),this.store.select(Y).subscribe(t=>{this.currentPage=t||1}),this.store.select(w).subscribe(t=>{t&&(this.entretienvehicules=t.map(n=>({...n,state:!1})),this.entretienvehiculeList=[...this.entretienvehicules],this.updateNoResultDisplay())}),this.loadData(1)}ngAfterViewInit(){this.addEntretienvehicule&&this.addEntretienvehicule.onHidden.subscribe(()=>{this.entretienvehiculeForm.reset();const t=document.querySelector(".modal-title");t&&(t.innerHTML="Ajouter un entretien vehicule");const n=document.getElementById("add-btn");n&&(n.innerHTML="Ajouter")}),this.deleteRecordModal&&this.deleteRecordModal.onHidden.subscribe(()=>{this.deleteID=null})}loadData(t=1){this.store.dispatch((0,v.Mb)({page:t}))}onUploadSuccess(t){setTimeout(()=>{this.uploadedFiles.push(t[0]),this.entretienvehiculeForm.controls.img.setValue(t[0].dataURL)},0)}removeFile(t){this.uploadedFiles.splice(this.uploadedFiles.indexOf(t),1)}openAddModal(){this.lastActiveElement=document.activeElement,this.addEntretienvehicule?.show(),document.querySelector(".modal-title").innerHTML="Ajouter un entretien vehicule",document.getElementById("add-btn").innerHTML="Ajouter",this.entretienvehiculeForm.reset()}closeAddModal(){this.lastActiveElement?this.lastActiveElement.focus():document.body.focus(),setTimeout(()=>{this.addEntretienvehicule?.hide();const t=document.querySelector(".modal-title");t&&(t.innerHTML="Ajouter un entretien vehicule");const n=document.getElementById("add-btn");n&&(n.innerHTML="Ajouter")},10)}editList(t){this.lastActiveElement=document.activeElement,this.addEntretienvehicule?.show(),document.querySelector(".modal-title").innerHTML="Modifier le entretien vehicule",document.getElementById("add-btn").innerHTML="Mettre \xe0 jour";const s="number"==typeof t?this.entretienvehicules[t]:this.entretienvehicules.find(r=>r.id===t);s&&(this.uploadedFiles.length>0&&(this.uploadedFiles=[]),s.img&&this.uploadedFiles.push({dataURL:s.img,name:s.imgalt,size:1024}),this.entretienvehiculeForm.patchValue(s))}saveProperty(){if(this.entretienvehiculeForm.valid){let t={...this.entretienvehiculeForm.value};t.id||delete t.id,this.entretienvehiculeForm.get("id")?.value?(this.store.dispatch((0,v.JW)({updatedData:t})),this.toastService.success("Typebeoin mis \xe0 jour avec succ\xe8s !","Succ\xe8s")):(this.store.dispatch((0,v.pU)({newData:t})),this.toastService.success("Entretien vehicule ajout\xe9 avec succ\xe8s !","Succ\xe8s")),this.uploadedFiles=[],this.entretienvehiculeForm.reset(),this.closeAddModal()}else this.toastService.error("Veuillez v\xe9rifier les informations saisies.","Erreur")}removeItem(t){this.lastActiveElement=document.activeElement,this.deleteID=t,this.deleteRecordModal?.show()}closeDeleteModal(){this.lastActiveElement?this.lastActiveElement.focus():document.body.focus(),setTimeout(()=>{this.deleteRecordModal?.hide()},10)}confirmDelete(t){return t?(this.store.dispatch((0,v.pr)({id:t.toString()})),this.toastService.success("ENtretien vehicule supprim\xe9 avec succ\xe8s !","Succ\xe8s"),void this.afterDeleteActions()):this.checkedValGet&&this.checkedValGet.length>0?(console.log("IDs \xe0 supprimer :",this.checkedValGet),this.store.dispatch((0,v.X4)({id:this.checkedValGet.join(",")})),this.toastService.success("Entretien vehicule supprim\xe9es avec succ\xe8s !","Succ\xe8s"),void this.afterDeleteActions()):(this.toastService.error("Aucun entretien vehicule s\xe9lectionn\xe9 pour suppression.","Erreur"),void this.closeDeleteModal())}afterDeleteActions(){this.closeDeleteModal(),this.masterSelected=!1,this.deleteID=null,this.checkedValGet=[]}resetCheckboxes(){this.entretienvehicules&&this.entretienvehicules.forEach(n=>{n&&(n.state=!1)}),this.checkedValGet=[];const t=document.querySelector("#select-all-checkbox");t&&(t.checked=!1)}checkUncheckAll(t){this.entretienvehicules&&(this.entretienvehicules.forEach(n=>{n&&(n.state=t.target.checked)}),this.masterSelected=t.target.checked,this.updateCheckedValues())}onCheckboxChange(t){this.updateCheckedValues()}updateCheckedValues(){const t=[];if(this.entretienvehicules&&this.entretienvehicules.length>0)for(let n=0;n<this.entretienvehicules.length;n++)this.entretienvehicules[n]&&!0===this.entretienvehicules[n].state&&t.push(this.entretienvehicules[n].id);this.checkedValGet=t,console.log("\xc9l\xe9ments coch\xe9s:",this.checkedValGet)}onSort(t){this.direction="asc"==this.direction?"desc":"asc";const n=[...this.entretienvehicules];n.sort((i,s)=>{const r=this.compare(i[t],s[t]);return"asc"===this.direction?r:-r}),this.entretienvehicules=n}compare(t,n){return t<n?-1:t>n?1:0}filterdata(){this.term?this.entretienvehicules=this.entretienvehiculeList.filter(t=>t.libelle?.toLowerCase().includes(this.term.toLowerCase())||t.id?.toString().includes(this.term)):this.loadData(this.currentPage),this.updateNoResultDisplay()}updateNoResultDisplay(){const t=document.querySelector(".noresult");t&&(t.style.display=this.term&&0===this.entretienvehicules.length?"block":"none")}pageChanged(t){this.loadData(t.page)}viewDetails(t){this.lastActiveElement=document.activeElement;const n=this.entretienvehicules.find(i=>i.id===t);n?(this.selectedEntretienvehicule=n,this.viewEntretienvehicule?.show()):this.toastService.error("Departement introuvable","Erreur")}closeViewModal(){this.lastActiveElement?this.lastActiveElement.focus():document.body.focus(),setTimeout(()=>{this.viewEntretienvehicule?.hide(),this.selectedEntretienvehicule=null},10)}static{this.\u0275fac=function(n){return new(n||l)(e.rXU(a.ze),e.rXU(o.vh),e.rXU($.tw),e.rXU(f.il))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-liste-entretien"]],viewQuery:function(n,i){if(1&n&&(e.GBs(U,5),e.GBs(J,5),e.GBs(H,5),e.GBs(X,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.addEntretienvehicule=s.first),e.mGM(s=e.lsd())&&(i.deleteRecordModal=s.first),e.mGM(s=e.lsd())&&(i.mainContainer=s.first),e.mGM(s=e.lsd())&&(i.viewEntretienvehicule=s.first)}},features:[e.Jv_([o.QX])],decls:136,vars:26,consts:[["addEntretienvehicule","bs-modal"],["deleteRecordModal","bs-modal"],["viewEntretienvehicule","bs-modal"],["title","Entretien v\xe9hicule List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],["id","entretienvehiculeList",1,"card"],[1,"card-header"],[1,"row","align-items-center","gy-3"],[1,"col-lg-3","col-md-6","order-last","order-md-first","me-auto"],[1,"search-box"],["type","text","placeholder","Rechercher par libell\xe9 ou ID...",1,"form-control","search",3,"ngModelChange","keyup","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-md-auto","col-6","text-end"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],["id","remove-actions",1,"btn","btn-subtle-danger",3,"click"],[1,"ri-delete-bin-2-line"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-person-plus","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","table-light"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","checkAll",1,"form-check-label"],["scope","col",1,"sort","cursor-pointer",3,"click"],["scope","col"],[1,"list","form-check-all"],[3,"id"],[4,"ngIf"],["id","elmLoader",4,"ngIf"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center",3,"ngClass"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","justify-content-center","hstack","gap-2",3,"ngModelChange","pageChanged","totalItems","itemsPerPage","ngModel"],["bsModal","","id","addEntretienvehicule",1,"modal","fade",3,"config"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addEntretienvehiculeModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"ngSubmit","formGroup"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["type","hidden","id","id-field","formControlName","id"],[1,"mb-3"],["for","libelle-input",1,"form-label"],[1,"text-danger"],["type","text","formControlName","libelle","id","libelle-input","placeholder","Entrez le libell\xe9","required","",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["type","hidden","id","date-input"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary",3,"disabled"],["bsModal","","id","deleteRecordModal","tabindex","-1","aria-hidden","true",1,"modal","fade","zoomIn",3,"config"],[1,"modal-dialog","modal-dialog-centered"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-5"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-md","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","pt-2","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],["bsModal","","id","viewEntretienvehicule",1,"modal","fade",3,"config"],["id","viewEntretienvehiculeModalLabel",1,"modal-title"],[1,"form-label","fw-medium"],["type","button",1,"btn","btn-secondary",3,"click"],["type","checkbox","name","checkAll",1,"form-check-input",3,"ngModelChange","change","value","ngModel"],[1,"form-check-label"],[1,"entretienvehicule_id"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"immatriculation"],[1,"description"],[1,"periode"],[1,"debit"],[1,"credit"],[1,"solde"],[1,"d-flex","gap-2","list-unstyled","mb-0"],["href","javascript:void(0);",1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"click"],[1,"ph-eye"],["href","javascript:void(0);",1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil"],["href","javascript:void(0);",1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash"],["colspan","4",1,"text-center","py-4"],[1,"ph-file-x","fs-1","text-primary"],["id","elmLoader"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"text-danger","mt-1"]],template:function(n,i){if(1&n){const s=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10)(8,"input",11),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.term,c)||(i.term=c),e.Njj(c)}),e.bIt("keyup",function(){return e.eBV(s),e.Njj(i.filterdata())}),e.k0s(),e.nrm(9,"i",12),e.k0s()(),e.j41(10,"div",13)(11,"div",14)(12,"button",15),e.bIt("click",function(){e.eBV(s);const c=e.sdS(95);return e.Njj(null==c?null:c.show())}),e.nrm(13,"i",16),e.EFF(14),e.k0s(),e.j41(15,"button",17),e.bIt("click",function(){e.eBV(s);const c=e.sdS(68);return e.Njj(null==c?null:c.show())}),e.nrm(16,"i",18),e.EFF(17," Ajouter un entretien v\xe9hicule"),e.k0s()()()()(),e.j41(18,"div",19)(19,"div",20)(20,"table",21)(21,"thead",22)(22,"tr")(23,"th")(24,"div",23)(25,"input",24),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.masterSelected,c)||(i.masterSelected=c),e.Njj(c)}),e.bIt("change",function(c){return e.eBV(s),e.Njj(i.checkUncheckAll(c))}),e.k0s(),e.nrm(26,"label",25),e.k0s()(),e.j41(27,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("id"))}),e.EFF(28,"# "),e.k0s(),e.j41(29,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("immatriculation"))}),e.EFF(30,"Immatriculation"),e.k0s(),e.j41(31,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("description"))}),e.EFF(32,"Libell\xe9"),e.k0s(),e.j41(33,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("periode"))}),e.EFF(34,"periode"),e.k0s(),e.j41(35,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("debit"))}),e.EFF(36,"debit"),e.k0s(),e.j41(37,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("credit"))}),e.EFF(38,"credit"),e.k0s(),e.j41(39,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("solde"))}),e.EFF(40,"solde"),e.k0s(),e.j41(41,"th",27),e.EFF(42,"Action"),e.k0s()()(),e.j41(43,"tbody",28),e.Z7z(44,Q,31,11,"tr",29,Z),e.DNE(46,W,7,0,"tr",30),e.k0s()(),e.DNE(47,K,4,0,"div",31),e.j41(48,"div",32)(49,"div",33),e.nrm(50,"i",34),e.j41(51,"h5",35),e.EFF(52,"Aucun r\xe9sultat trouv\xe9"),e.k0s(),e.j41(53,"p",36),e.EFF(54,"Nous n'avons trouv\xe9 aucun entretien de v\xe9hicule correspondant \xe0 votre recherche."),e.k0s()()()(),e.j41(55,"div",37)(56,"div",38)(57,"div",39),e.EFF(58," Affichage de "),e.j41(59,"span",40),e.EFF(60),e.k0s(),e.EFF(61," sur "),e.j41(62,"span",40),e.EFF(63),e.k0s(),e.EFF(64," r\xe9sultats "),e.k0s()(),e.j41(65,"div",41)(66,"pagination",42),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.currentPage,c)||(i.currentPage=c),e.Njj(c)}),e.bIt("pageChanged",function(c){return e.eBV(s),e.Njj(i.pageChanged(c))}),e.k0s()()()()()()(),e.j41(67,"div",43,0)(69,"div",44)(70,"div",45)(71,"div",46)(72,"h5",47),e.EFF(73,"Ajouter un entretien v\xe9hicule"),e.k0s(),e.j41(74,"button",48),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeAddModal())}),e.k0s()(),e.j41(75,"form",49),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(i.saveProperty())}),e.j41(76,"div",50),e.nrm(77,"div",51)(78,"input",52),e.j41(79,"div",53)(80,"label",54),e.EFF(81,"Libell\xe9"),e.j41(82,"span",55),e.EFF(83,"*"),e.k0s()(),e.nrm(84,"input",56),e.DNE(85,ee,2,1,"div",57),e.k0s(),e.nrm(86,"input",58),e.k0s(),e.j41(87,"div",59)(88,"div",60)(89,"button",61),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeAddModal())}),e.nrm(90,"i",62),e.EFF(91," Fermer"),e.k0s(),e.j41(92,"button",63),e.EFF(93,"Ajouter"),e.k0s()()()()()()(),e.j41(94,"div",64,1)(96,"div",65)(97,"div",45)(98,"div",46)(99,"button",66),e.bIt("click",function(){e.eBV(s);const c=e.sdS(95);return e.Njj(null==c?null:c.hide())}),e.k0s()(),e.j41(100,"div",67)(101,"div",68)(102,"div",55),e.nrm(103,"i",69),e.k0s(),e.j41(104,"div",70)(105,"h4",71),e.EFF(106,"\xcates-vous s\xfbr ?"),e.k0s(),e.j41(107,"p",72),e.EFF(108),e.k0s()()(),e.j41(109,"div",73)(110,"button",74),e.bIt("click",function(){e.eBV(s);const c=e.sdS(95);return e.Njj(null==c?null:c.hide())}),e.EFF(111,"Annuler"),e.k0s(),e.j41(112,"button",75),e.bIt("click",function(){return e.eBV(s),e.Njj(i.confirmDelete(i.deleteID))}),e.EFF(113,"Oui, supprimer"),e.k0s()()()()()(),e.j41(114,"div",76,2)(116,"div",44)(117,"div",45)(118,"div",46)(119,"h5",77),e.EFF(120,"D\xe9tails de entretien v\xe9hicule"),e.k0s(),e.j41(121,"button",48),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeViewModal())}),e.k0s()(),e.j41(122,"div",50)(123,"div",53)(124,"label",78),e.EFF(125,"ID:"),e.k0s(),e.j41(126,"p"),e.EFF(127),e.k0s()(),e.j41(128,"div",53)(129,"label",78),e.EFF(130,"Libell\xe9:"),e.k0s(),e.j41(131,"p"),e.EFF(132),e.k0s()()(),e.j41(133,"div",59)(134,"button",79),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeViewModal())}),e.EFF(135,"Fermer"),e.k0s()()()()()}if(2&n){let s;e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(8),e.R50("ngModel",i.term),e.R7$(4),e.AVh("d-none",0===i.checkedValGet.length),e.R7$(2),e.SpI(" Supprimer (",i.checkedValGet.length,") "),e.R7$(11),e.R50("ngModel",i.masterSelected),e.R7$(19),e.Dyx(i.entretienvehicules),e.R7$(2),e.Y8G("ngIf",0===(null==i.entretienvehicules?null:i.entretienvehicules.length)&&!i.term&&!i.isLoading),e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(8),e.Y8G("ngClass",0==i.entretienvehicules.length?"d-none":""),e.R7$(5),e.JRh(i.entretienvehicules.length||0),e.R7$(3),e.JRh(i.totalItems||0),e.R7$(3),e.Y8G("totalItems",i.totalItems)("itemsPerPage",10),e.R50("ngModel",i.currentPage),e.R7$(),e.Y8G("config",e.lJ4(23,A)),e.R7$(8),e.Y8G("formGroup",i.entretienvehiculeForm),e.R7$(10),e.Y8G("ngIf",(null==(s=i.entretienvehiculeForm.get("libelle"))?null:s.invalid)&&(null==(s=i.entretienvehiculeForm.get("libelle"))?null:s.touched)),e.R7$(7),e.Y8G("disabled",i.entretienvehiculeForm.invalid),e.R7$(2),e.Y8G("config",e.lJ4(24,A)),e.R7$(14),e.SpI("Voulez-vous vraiment supprimer ",i.checkedValGet&&i.checkedValGet.length>1?"ces entretiens de v\xe9hicule":"cet entretien v\xe9hicule"," ?"),e.R7$(6),e.Y8G("config",e.lJ4(25,A)),e.R7$(13),e.JRh(null==i.selectedEntretienvehicule?null:i.selectedEntretienvehicule.id),e.R7$(5),e.JRh(null==i.selectedEntretienvehicule?null:i.selectedEntretienvehicule.libelle)}},dependencies:[o.YU,o.bT,j.m,D.eK,T.hZ,a.qT,a.me,a.Zm,a.BC,a.cb,a.YS,a.vS,a.j4,a.JD]})}}return l})();var y=d(48355),V=d(29577),ie=d(15097),ne=d(80019),se=d(31777),le=d(44971),oe=d(44169),re=d(18019),S=d(70339);const ce=["addVehicule"],ae=["deleteRecordModal"],de=["mainContainer"],ue=["viewVehicule"],I=(l,u)=>u.id,G=()=>({backdrop:"static",keyboard:!1,ignoreBackdropClick:!0});function he(l,u){if(1&l){const t=e.RV6();e.j41(0,"tr",29)(1,"td")(2,"div",23)(3,"input",89),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.state,i)||(s.state=i),e.Njj(i)}),e.bIt("change",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.onCheckboxChange(i))}),e.k0s(),e.nrm(4,"label",90),e.k0s()(),e.j41(5,"td",91)(6,"a",92),e.EFF(7),e.k0s()(),e.j41(8,"td",93),e.EFF(9),e.k0s(),e.j41(10,"td",93),e.EFF(11),e.k0s(),e.j41(12,"td",94),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"td",95),e.EFF(16),e.k0s(),e.j41(17,"td",96),e.EFF(18),e.k0s(),e.j41(19,"td")(20,"ul",97)(21,"li")(22,"a",98),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.viewDetails(i.id))}),e.nrm(23,"i",99),e.k0s()(),e.j41(24,"li")(25,"a",100),e.bIt("click",function(){const i=e.eBV(t).$index,s=e.XpG();return e.Njj(s.editList(i))}),e.nrm(26,"i",101),e.k0s()(),e.j41(27,"li")(28,"a",102),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.removeItem(i.id))}),e.nrm(29,"i",103),e.k0s()()()()()}if(2&l){const t=u.$implicit,n=u.$index;e.Mz_("id","l_",t.id,""),e.R7$(3),e.FS9("value",t.id),e.R50("ngModel",t.state),e.R7$(4),e.JRh(n+1),e.R7$(2),e.JRh(t.immatriculation),e.R7$(2),e.JRh(t.description),e.R7$(2),e.JRh(e.i5U(14,10,t.date_circulation,"dd/MM/yyyy")),e.R7$(3),e.JRh(t.type_vehicule_detail.libelle),e.R7$(2),e.JRh(t.agence_detail.nom_agence)}}function me(l,u){1&l&&(e.j41(0,"tr")(1,"td",104),e.nrm(2,"i",105),e.j41(3,"h5",35),e.EFF(4,"Aucun v\xe9hicule disponible"),e.k0s(),e.j41(5,"p",36),e.EFF(6,"Veuillez ajouter un v\xe9hicule pour commencer."),e.k0s()()())}function pe(l,u){1&l&&(e.j41(0,"div",106)(1,"div",107)(2,"span",108),e.EFF(3,"Chargement..."),e.k0s()()())}function ve(l,u){1&l&&(e.j41(0,"small"),e.EFF(1,"L'immatriculation est requis"),e.k0s())}function fe(l,u){if(1&l&&(e.j41(0,"div",109),e.DNE(1,ve,2,0,"small",30),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=n.vehiculeForm.get("immatriculation"))||null==t.errors?null:t.errors.required)}}function be(l,u){1&l&&(e.j41(0,"small"),e.EFF(1,"Le libell\xe9 est requis"),e.k0s())}function ge(l,u){if(1&l&&(e.j41(0,"div",109),e.DNE(1,be,2,0,"small",30),e.k0s()),2&l){let t;const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=n.vehiculeForm.get("description"))||null==t.errors?null:t.errors.required)}}function _e(l,u){if(1&l&&(e.j41(0,"option",63),e.EFF(1),e.k0s()),2&l){const t=u.$implicit;e.FS9("value",t.id),e.R7$(),e.JRh(t.libelle)}}function ke(l,u){if(1&l&&(e.j41(0,"option",63),e.EFF(1),e.k0s()),2&l){const t=u.$implicit;e.FS9("value",t.id),e.R7$(),e.JRh(t.nom_agence)}}function Ee(l,u){if(1&l&&(e.j41(0,"option",63),e.EFF(1),e.k0s()),2&l){const t=u.$implicit;e.FS9("value",t.id),e.R7$(),e.JRh(t.libelle_statut)}}const je=[{path:"importer-entretien",component:p},{path:"liste-entretien",component:te},{path:"liste-vehicule",component:(()=>{class l{constructor(t,n,i,s){this.formBuilder=t,this.datePipe=n,this.toastService=i,this.store=s,this.vehicules=[],this.vehiculeList=[],this.totalItems=0,this.currentPage=1,this.isLoading=!0,this.submitted=!1,this.files=[],this.checkedValGet=[],this.agences=[],this.typevehicules=[],this.statuts=[],this.lastActiveElement=null,this.selectedVehicule=null,this.direction="asc",this.dropzoneConfig={clickable:!0,addRemoveLinks:!0,previewsContainer:!1},this.uploadedFiles=[]}ngOnInit(){this.breadCrumbItems=[{label:"vehicule",active:!0},{label:"Vehicule List",active:!0}],this.vehiculeForm=this.formBuilder.group({id:[""],immatriculation:["",[a.k0.required]],description:["",[a.k0.required]],type_vehicule:["",[a.k0.required]],statut:["",[a.k0.required]],agence:["",[a.k0.required]],date_circulation:["",[a.k0.required]]}),this.store.select(V.Nz).subscribe(t=>{this.isLoading=t,t?document.getElementById("elmLoader")?.classList.remove("d-none"):document.getElementById("elmLoader")?.classList.add("d-none")}),this.store.select(V.$8).subscribe(t=>{this.totalItems=t||0}),this.store.select(V.Vs).subscribe(t=>{this.currentPage=t||1}),this.store.select(V.GO).subscribe(t=>{t&&(this.vehicules=t.map(n=>({...n,state:!1})),this.vehiculeList=[...this.vehicules],this.updateNoResultDisplay())}),this.store.select(se.T7).subscribe(t=>{t&&(this.agences=t.map(n=>({...n,state:!1})),console.log(t))}),this.store.select(ie.jC).subscribe(t=>{t&&(this.typevehicules=t.map(n=>({...n,state:!1})))}),this.store.select(oe.FZ).subscribe(t=>{t&&(this.statuts=t.map(n=>({...n,state:!1})),console.log(t))}),this.loadData(1)}ngAfterViewInit(){this.addVehicule&&this.addVehicule.onHidden.subscribe(()=>{this.vehiculeForm.reset();const t=document.querySelector(".modal-title");t&&(t.innerHTML="Ajouter un v\xe9hicule");const n=document.getElementById("add-btn");n&&(n.innerHTML="Ajouter")}),this.deleteRecordModal&&this.deleteRecordModal.onHidden.subscribe(()=>{this.deleteID=null})}loadData(t=1){this.store.dispatch((0,y.W3)({page:t})),this.store.dispatch((0,le.Sf)()),this.store.dispatch((0,ne.GM)()),this.store.dispatch((0,re.kq)())}onUploadSuccess(t){setTimeout(()=>{this.uploadedFiles.push(t[0]),this.vehiculeForm.controls.img.setValue(t[0].dataURL)},0)}removeFile(t){this.uploadedFiles.splice(this.uploadedFiles.indexOf(t),1)}openAddModal(){this.lastActiveElement=document.activeElement,this.addVehicule?.show(),document.querySelector(".modal-title").innerHTML="Ajouter un vehicule",document.getElementById("add-btn").innerHTML="Ajouter",this.vehiculeForm.reset()}closeAddModal(){this.lastActiveElement?this.lastActiveElement.focus():document.body.focus(),setTimeout(()=>{this.addVehicule?.hide();const t=document.querySelector(".modal-title");t&&(t.innerHTML="Ajouter un v\xe9hicule");const n=document.getElementById("add-btn");n&&(n.innerHTML="Ajouter")},10)}editList(t){this.lastActiveElement=document.activeElement,this.addVehicule?.show(),document.querySelector(".modal-title").innerHTML="Modifier le v\xe9hicule",document.getElementById("add-btn").innerHTML="Mettre \xe0 jour";const s="number"==typeof t?this.vehicules[t]:this.vehicules.find(r=>r.id===t);s&&(this.uploadedFiles.length>0&&(this.uploadedFiles=[]),s.img&&this.uploadedFiles.push({dataURL:s.img,name:s.imgalt,size:1024}),this.vehiculeForm.patchValue(s))}saveProperty(){if(this.vehiculeForm.valid){let t={...this.vehiculeForm.value};t.id||delete t.id,this.vehiculeForm.get("id")?.value?(this.store.dispatch((0,y.Zi)({updatedData:t})),this.toastService.success("Typebeoin mis \xe0 jour avec succ\xe8s !","Succ\xe8s")):(this.store.dispatch((0,y.Tb)({newData:t})),this.toastService.success("V\xe9hicule ajout\xe9 avec succ\xe8s !","Succ\xe8s")),this.uploadedFiles=[],this.vehiculeForm.reset(),this.closeAddModal()}else this.toastService.error("Veuillez v\xe9rifier les informations saisies.","Erreur")}removeItem(t){this.lastActiveElement=document.activeElement,this.deleteID=t,this.deleteRecordModal?.show()}closeDeleteModal(){this.lastActiveElement?this.lastActiveElement.focus():document.body.focus(),setTimeout(()=>{this.deleteRecordModal?.hide()},10)}confirmDelete(t){return t?(this.store.dispatch((0,y.fO)({id:t.toString()})),this.toastService.success("V\xe9hicule supprim\xe9 avec succ\xe8s !","Succ\xe8s"),void this.afterDeleteActions()):this.checkedValGet&&this.checkedValGet.length>0?(console.log("IDs \xe0 supprimer :",this.checkedValGet),this.store.dispatch((0,y.PC)({id:this.checkedValGet.join(",")})),this.toastService.success("V\xe9hicule supprim\xe9es avec succ\xe8s !","Succ\xe8s"),void this.afterDeleteActions()):(this.toastService.error("Aucun v\xe9hicule s\xe9lectionn\xe9 pour suppression.","Erreur"),void this.closeDeleteModal())}afterDeleteActions(){this.closeDeleteModal(),this.masterSelected=!1,this.deleteID=null,this.checkedValGet=[]}resetCheckboxes(){this.vehicules&&this.vehicules.forEach(n=>{n&&(n.state=!1)}),this.checkedValGet=[];const t=document.querySelector("#select-all-checkbox");t&&(t.checked=!1)}checkUncheckAll(t){this.vehicules&&(this.vehicules.forEach(n=>{n&&(n.state=t.target.checked)}),this.masterSelected=t.target.checked,this.updateCheckedValues())}onCheckboxChange(t){this.updateCheckedValues()}updateCheckedValues(){const t=[];if(this.vehicules&&this.vehicules.length>0)for(let n=0;n<this.vehicules.length;n++)this.vehicules[n]&&!0===this.vehicules[n].state&&t.push(this.vehicules[n].id);this.checkedValGet=t,console.log("\xc9l\xe9ments coch\xe9s:",this.checkedValGet)}onSort(t){this.direction="asc"==this.direction?"desc":"asc";const n=[...this.vehicules];n.sort((i,s)=>{const r=this.compare(i[t],s[t]);return"asc"===this.direction?r:-r}),this.vehicules=n}compare(t,n){return t<n?-1:t>n?1:0}filterdata(){this.term?this.vehicules=this.vehiculeList.filter(t=>t.libelle?.toLowerCase().includes(this.term.toLowerCase())||t.id?.toString().includes(this.term)):this.loadData(this.currentPage),this.updateNoResultDisplay()}updateNoResultDisplay(){const t=document.querySelector(".noresult");t&&(t.style.display=this.term&&0===this.vehicules.length?"block":"none")}pageChanged(t){this.loadData(t.page)}viewDetails(t){this.lastActiveElement=document.activeElement;const n=this.vehicules.find(i=>i.id===t);n?(this.selectedVehicule=n,this.viewVehicule?.show()):this.toastService.error("Departement introuvable","Erreur")}closeViewModal(){this.lastActiveElement?this.lastActiveElement.focus():document.body.focus(),setTimeout(()=>{this.viewVehicule?.hide(),this.selectedVehicule=null},10)}static{this.\u0275fac=function(n){return new(n||l)(e.rXU(a.ze),e.rXU(o.vh),e.rXU($.tw),e.rXU(f.il))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["app-liste-vehicule"]],viewQuery:function(n,i){if(1&n&&(e.GBs(ce,5),e.GBs(ae,5),e.GBs(de,5),e.GBs(ue,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.addVehicule=s.first),e.mGM(s=e.lsd())&&(i.deleteRecordModal=s.first),e.mGM(s=e.lsd())&&(i.mainContainer=s.first),e.mGM(s=e.lsd())&&(i.viewVehicule=s.first)}},features:[e.Jv_([o.QX])],decls:178,vars:27,consts:[["addVehicule","bs-modal"],["deleteRecordModal","bs-modal"],["viewVehicule","bs-modal"],["title","V\xe9hicule List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],["id","vehiculeList",1,"card"],[1,"card-header"],[1,"row","align-items-center","gy-3"],[1,"col-lg-3","col-md-6","order-last","order-md-first","me-auto"],[1,"search-box"],["type","text","placeholder","Rechercher par libell\xe9 ou ID...",1,"form-control","search",3,"ngModelChange","keyup","ngModel"],[1,"ri-search-line","search-icon"],[1,"col-md-auto","col-6","text-end"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],["id","remove-actions",1,"btn","btn-subtle-danger",3,"click"],[1,"ri-delete-bin-2-line"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-person-plus","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","table-light"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","checkAll",1,"form-check-label"],["scope","col",1,"sort","cursor-pointer",3,"click"],["scope","col"],["id","invoice-list-data",1,"list","form-check-all"],[3,"id"],[4,"ngIf"],["id","elmLoader",4,"ngIf"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center",3,"ngClass"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","justify-content-center","hstack","gap-2",3,"ngModelChange","pageChanged","totalItems","itemsPerPage","ngModel"],["bsModal","","id","addVehicule",1,"modal","fade",3,"config"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addVehiculeModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"ngSubmit","formGroup"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["type","hidden","id","id-field","formControlName","id"],[1,"mb-3"],["for","libelle-input",1,"form-label"],[1,"text-danger"],["type","text","formControlName","immatriculation","id","libelle-input","placeholder","","required","",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["type","hidden","id","rating-field"],["type","text","formControlName","description","id","libelle-input","placeholder","","required","",1,"form-control"],[1,"col-lg-6"],["for","status-input",1,"form-label"],["id","status-input","formControlName","type_vehicule",1,"form-select"],[3,"value"],["formControlName","date_circulation","bsDatepicker","",1,"form-control"],["id","status-input","formControlName","agence",1,"form-select"],["id","status-input","formControlName","statut",1,"form-select"],["type","hidden","id","date-input"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary",3,"disabled"],["bsModal","","id","deleteRecordModal","tabindex","-1","aria-hidden","true",1,"modal","fade","zoomIn",3,"config"],[1,"modal-dialog","modal-dialog-centered"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-5"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-md","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","pt-2","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],["bsModal","","id","viewVehicule",1,"modal","fade",3,"config"],["id","viewVehiculeModalLabel",1,"modal-title"],[1,"form-label","fw-medium"],["type","button",1,"btn","btn-secondary",3,"click"],["type","checkbox","name","checkAll",1,"form-check-input",3,"ngModelChange","change","value","ngModel"],[1,"form-check-label"],[1,"typevehicule_id"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"immatriculation"],[1,"created_at"],[1,"type_vehicule"],[1,"agence_detail"],[1,"d-flex","gap-2","list-unstyled","mb-0"],["href","javascript:void(0);",1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"click"],[1,"ph-eye"],["href","javascript:void(0);",1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil"],["href","javascript:void(0);",1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash"],["colspan","4",1,"text-center","py-4"],[1,"ph-file-x","fs-1","text-primary"],["id","elmLoader"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"text-danger","mt-1"]],template:function(n,i){if(1&n){const s=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10)(8,"input",11),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.term,c)||(i.term=c),e.Njj(c)}),e.bIt("keyup",function(){return e.eBV(s),e.Njj(i.filterdata())}),e.k0s(),e.nrm(9,"i",12),e.k0s()(),e.j41(10,"div",13)(11,"div",14)(12,"button",15),e.bIt("click",function(){e.eBV(s);const c=e.sdS(137);return e.Njj(null==c?null:c.show())}),e.nrm(13,"i",16),e.EFF(14),e.k0s(),e.j41(15,"button",17),e.bIt("click",function(){e.eBV(s);const c=e.sdS(66);return e.Njj(null==c?null:c.show())}),e.nrm(16,"i",18),e.EFF(17," Ajouter un v\xe9hicule"),e.k0s()()()()(),e.j41(18,"div",19)(19,"div",20)(20,"table",21)(21,"thead",22)(22,"tr")(23,"th")(24,"div",23)(25,"input",24),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.masterSelected,c)||(i.masterSelected=c),e.Njj(c)}),e.bIt("change",function(c){return e.eBV(s),e.Njj(i.checkUncheckAll(c))}),e.k0s(),e.nrm(26,"label",25),e.k0s()(),e.j41(27,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("id"))}),e.EFF(28,"# "),e.k0s(),e.j41(29,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("immatriculation"))}),e.EFF(30,"Immatriculation"),e.k0s(),e.j41(31,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("description"))}),e.EFF(32,"Libell\xe9"),e.k0s(),e.j41(33,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("date_circulation"))}),e.EFF(34,"Date 1\xe8re circulation"),e.k0s(),e.j41(35,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("type_vehicule"))}),e.EFF(36,"Type v\xe9hicule"),e.k0s(),e.j41(37,"th",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSort("agence"))}),e.EFF(38,"Agence"),e.k0s(),e.j41(39,"th",27),e.EFF(40,"Action"),e.k0s()()(),e.j41(41,"tbody",28),e.Z7z(42,he,30,13,"tr",29,I),e.DNE(44,me,7,0,"tr",30),e.k0s()(),e.DNE(45,pe,4,0,"div",31),e.j41(46,"div",32)(47,"div",33),e.nrm(48,"i",34),e.j41(49,"h5",35),e.EFF(50,"Aucun r\xe9sultat trouv\xe9"),e.k0s(),e.j41(51,"p",36),e.EFF(52,"Nous n'avons trouv\xe9 aucun v\xe9hicule correspondant \xe0 votre recherche."),e.k0s()()()(),e.j41(53,"div",37)(54,"div",38)(55,"div",39),e.EFF(56," Affichage de "),e.j41(57,"span",40),e.EFF(58),e.k0s(),e.EFF(59," sur "),e.j41(60,"span",40),e.EFF(61),e.k0s(),e.EFF(62," r\xe9sultats "),e.k0s()(),e.j41(63,"div",41)(64,"pagination",42),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.currentPage,c)||(i.currentPage=c),e.Njj(c)}),e.bIt("pageChanged",function(c){return e.eBV(s),e.Njj(i.pageChanged(c))}),e.k0s()()()()()()(),e.j41(65,"div",43,0)(67,"div",44)(68,"div",45)(69,"div",46)(70,"h5",47),e.EFF(71,"Ajouter un v\xe9hicule"),e.k0s(),e.j41(72,"button",48),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeAddModal())}),e.k0s()(),e.j41(73,"form",49),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(i.saveProperty())}),e.j41(74,"div",50),e.nrm(75,"div",51)(76,"input",52),e.j41(77,"div",53)(78,"label",54),e.EFF(79,"Immatriculation"),e.j41(80,"span",55),e.EFF(81,"*"),e.k0s()(),e.nrm(82,"input",56),e.DNE(83,fe,2,1,"div",57),e.k0s(),e.nrm(84,"input",58),e.j41(85,"div",4)(86,"div",5)(87,"div",53)(88,"label",54),e.EFF(89,"Libell\xe9"),e.j41(90,"span",55),e.EFF(91,"*"),e.k0s()(),e.nrm(92,"input",59),e.DNE(93,ge,2,1,"div",57),e.k0s()(),e.j41(94,"div",60)(95,"div",53)(96,"label",61),e.EFF(97,"Type de v\xe9hicule"),e.j41(98,"span",55),e.EFF(99,"*"),e.k0s()(),e.j41(100,"select",62),e.Z7z(101,_e,2,2,"option",63,I),e.k0s()()(),e.j41(103,"div",60)(104,"div",53)(105,"label",61),e.EFF(106,"Date 1\xe8re circulation"),e.j41(107,"span",55),e.EFF(108,"*"),e.k0s()(),e.nrm(109,"input",64),e.k0s()(),e.j41(110,"div",60)(111,"div",53)(112,"label",61),e.EFF(113,"Agence"),e.j41(114,"span",55),e.EFF(115,"*"),e.k0s()(),e.j41(116,"select",65),e.Z7z(117,ke,2,2,"option",63,I),e.k0s()()(),e.j41(119,"div",60)(120,"div",53)(121,"label",61),e.EFF(122,"Statut"),e.j41(123,"span",55),e.EFF(124,"*"),e.k0s()(),e.j41(125,"select",66),e.Z7z(126,Ee,2,2,"option",63,I),e.k0s()()()(),e.nrm(128,"input",67),e.k0s(),e.j41(129,"div",68)(130,"div",69)(131,"button",70),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeAddModal())}),e.nrm(132,"i",71),e.EFF(133," Fermer"),e.k0s(),e.j41(134,"button",72),e.EFF(135,"Ajouter"),e.k0s()()()()()()(),e.j41(136,"div",73,1)(138,"div",74)(139,"div",45)(140,"div",46)(141,"button",75),e.bIt("click",function(){e.eBV(s);const c=e.sdS(137);return e.Njj(null==c?null:c.hide())}),e.k0s()(),e.j41(142,"div",76)(143,"div",77)(144,"div",55),e.nrm(145,"i",78),e.k0s(),e.j41(146,"div",79)(147,"h4",80),e.EFF(148,"\xcates-vous s\xfbr ?"),e.k0s(),e.j41(149,"p",81),e.EFF(150),e.k0s()()(),e.j41(151,"div",82)(152,"button",83),e.bIt("click",function(){e.eBV(s);const c=e.sdS(137);return e.Njj(null==c?null:c.hide())}),e.EFF(153,"Annuler"),e.k0s(),e.j41(154,"button",84),e.bIt("click",function(){return e.eBV(s),e.Njj(i.confirmDelete(i.deleteID))}),e.EFF(155,"Oui, supprimer"),e.k0s()()()()()(),e.j41(156,"div",85,2)(158,"div",44)(159,"div",45)(160,"div",46)(161,"h5",86),e.EFF(162,"D\xe9tails du v\xe9hicule"),e.k0s(),e.j41(163,"button",48),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeViewModal())}),e.k0s()(),e.j41(164,"div",50)(165,"div",53)(166,"label",87),e.EFF(167,"ID:"),e.k0s(),e.j41(168,"p"),e.EFF(169),e.k0s()(),e.j41(170,"div",53)(171,"label",87),e.EFF(172,"Immatriculation:"),e.k0s(),e.j41(173,"p"),e.EFF(174),e.k0s()()(),e.j41(175,"div",68)(176,"button",88),e.bIt("click",function(){return e.eBV(s),e.Njj(i.closeViewModal())}),e.EFF(177,"Fermer"),e.k0s()()()()()}if(2&n){let s,r;e.Y8G("breadcrumbItems",i.breadCrumbItems),e.R7$(8),e.R50("ngModel",i.term),e.R7$(4),e.AVh("d-none",0===i.checkedValGet.length),e.R7$(2),e.SpI(" Supprimer (",i.checkedValGet.length,") "),e.R7$(11),e.R50("ngModel",i.masterSelected),e.R7$(17),e.Dyx(i.vehicules),e.R7$(2),e.Y8G("ngIf",0===(null==i.vehicules?null:i.vehicules.length)&&!i.term&&!i.isLoading),e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(8),e.Y8G("ngClass",0==i.vehicules.length?"d-none":""),e.R7$(5),e.JRh(i.vehicules.length||0),e.R7$(3),e.JRh(i.totalItems||0),e.R7$(3),e.Y8G("totalItems",i.totalItems)("itemsPerPage",10),e.R50("ngModel",i.currentPage),e.R7$(),e.Y8G("config",e.lJ4(24,G)),e.R7$(8),e.Y8G("formGroup",i.vehiculeForm),e.R7$(10),e.Y8G("ngIf",(null==(s=i.vehiculeForm.get("immatriculation"))?null:s.invalid)&&(null==(s=i.vehiculeForm.get("immatriculation"))?null:s.touched)),e.R7$(10),e.Y8G("ngIf",(null==(r=i.vehiculeForm.get("description"))?null:r.invalid)&&(null==(r=i.vehiculeForm.get("description"))?null:r.touched)),e.R7$(8),e.Dyx(i.typevehicules),e.R7$(16),e.Dyx(i.agences),e.R7$(9),e.Dyx(i.statuts),e.R7$(8),e.Y8G("disabled",i.vehiculeForm.invalid),e.R7$(2),e.Y8G("config",e.lJ4(25,G)),e.R7$(14),e.SpI("Voulez-vous vraiment supprimer ",i.checkedValGet&&i.checkedValGet.length>1?"ces v\xe9hicules":"ce v\xe9hicule"," ?"),e.R7$(6),e.Y8G("config",e.lJ4(26,G)),e.R7$(13),e.JRh(null==i.selectedVehicule?null:i.selectedVehicule.id),e.R7$(5),e.JRh(null==i.selectedVehicule?null:i.selectedVehicule.immatriculation)}},dependencies:[o.YU,o.bT,j.m,D.eK,T.hZ,a.qT,a.xH,a.y7,a.me,a.Zm,a.wz,a.BC,a.cb,a.YS,a.vS,a.j4,a.JD,S.pc,S.p0,o.vh]})}}return l})()}];let Fe=(()=>{class l{static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[b.iI.forChild(je),b.iI]})}}return l})();var Ce=d(93887),ye=d(82716),Ve=d(96880),Ie=d(30763),Me=d(32812),Re=d(79224),Le=d(91022),De=d(70255),P=d(99386),Te=d(68580),Ae=d(14580),Se=d(13816),Ge=d(39884),Ne=d(47820),Be=d(534),$e=d(34404);const Pe={url:"https://httpbin.org/post",maxFilesize:50,acceptedFiles:"image/*"};let Oe=(()=>{class l{static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({providers:[o.vh,{provide:P.lk,useValue:Pe}],imports:[o.MD,Fe,Ce.G,Te.zE.forRoot(),D.x6.forRoot(),T.Q_.forRoot(),a.YN,a.X1,Ae.h6.forRoot(),Se.jr.forRoot(),Ne.Hq.forRoot(),Be.Ss.forRoot(),S.YN.forRoot(),De.r,Re.A,$e.VZ,P._L,Me.x,Ie.uY,Ge.wZ,ye.MQ,Ve.Ti,Le.ND.forRoot()]})}}return l})()},31777:(M,g,d)=>{d.d(g,{$8:()=>e,Nz:()=>_,OF:()=>b,T7:()=>F,Vs:()=>E});var o=d(59640);const a=(0,o.UX)("agence"),b=(0,o.Mz)(a,h=>h.agencedata),_=(0,o.Mz)(a,h=>h.loading),e=(0,o.Mz)(a,h=>h.totalItems),E=(0,o.Mz)(a,h=>h.currentPage),F=((0,o.Mz)(a,h=>h.next),(0,o.Mz)(a,h=>h.previous),(0,o.Mz)(a,h=>h.allAgences))},44169:(M,g,d)=>{d.d(g,{$8:()=>e,FZ:()=>F,Nz:()=>_,Vs:()=>E,g2:()=>b});var o=d(59640);const a=(0,o.UX)("statut"),b=(0,o.Mz)(a,h=>h.statutdata),_=(0,o.Mz)(a,h=>h.loading),e=(0,o.Mz)(a,h=>h.totalItems),E=(0,o.Mz)(a,h=>h.currentPage),F=((0,o.Mz)(a,h=>h.next),(0,o.Mz)(a,h=>h.previous),(0,o.Mz)(a,h=>h.allStatuts))},14580:(M,g,d)=>{d.d(g,{Mj:()=>h,h6:()=>L,kt:()=>R});var o=d(54438),a=d(60177),b=d(5992);const _=["*"],e=[[["","accordion-heading",""]],"*"],E=["[accordion-heading]","*"],j=m=>({"text-muted":m});function C(m,B){if(1&m&&(o.j41(0,"button",7),o.EFF(1),o.k0s()),2&m){const p=o.XpG();o.Y8G("ngClass",o.eq3(2,j,p.isDisabled)),o.R7$(),o.SpI(" ",p.heading," ")}}let F=(()=>{class m{constructor(){this.closeOthers=!1,this.isAnimated=!1}static{this.\u0275fac=function(v){return new(v||m)}}static{this.\u0275prov=o.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})(),h=(()=>{class m{constructor(p){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,p)}closeOtherPanels(p){this.closeOthers&&this.groups.forEach(v=>{v!==p&&(v.isOpen=!1)})}addGroup(p){p.isAnimated=this.isAnimated,this.groups.push(p)}removeGroup(p){const v=this.groups.indexOf(p);-1!==v&&this.groups.splice(v,1)}static{this.\u0275fac=function(v){return new(v||m)(o.rXU(F))}}static{this.\u0275cmp=o.VBU({type:m,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(v,f){2&v&&o.BMQ("aria-multiselectable",f.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:_,decls:1,vars:0,template:function(v,f){1&v&&(o.NAR(),o.SdG(0))},encapsulation:2})}}return m})(),R=(()=>{class m{get isOpen(){return this._isOpen}set isOpen(p){p!==this.isOpen&&(p&&this.accordion.closeOtherPanels(this),this._isOpen=p,Promise.resolve(null).then(()=>{this.isOpenChange.emit(p)}))}constructor(p){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new o.bkB,this._isOpen=!1,this.accordion=p}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static{this.\u0275fac=function(v){return new(v||m)(o.rXU(h))}}static{this.\u0275cmp=o.VBU({type:m,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(v,f){2&v&&o.AVh("panel-open",f.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:E,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"click","ngClass"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(v,f){1&v&&(o.NAR(e),o.j41(0,"div",0)(1,"div",1),o.bIt("click",function(){return f.toggleOpen()}),o.j41(2,"div",2)(3,"div",3),o.DNE(4,C,2,4,"button",4),o.SdG(5),o.k0s()()(),o.j41(6,"div",5)(7,"div",6),o.SdG(8,1),o.k0s()()()),2&v&&(o.Y8G("ngClass",f.panelClass),o.R7$(),o.Y8G("ngClass",f.isDisabled?"panel-disabled":"panel-enabled"),o.R7$(2),o.BMQ("aria-expanded",f.isOpen),o.R7$(),o.Y8G("ngIf",f.heading),o.R7$(2),o.Y8G("collapse",!f.isOpen)("isAnimated",f.isAnimated))},dependencies:[a.YU,a.bT,b.D],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}}return m})(),L=(()=>{class m{static forRoot(){return{ngModule:m,providers:[]}}static{this.\u0275fac=function(v){return new(v||m)}}static{this.\u0275mod=o.$C({type:m})}static{this.\u0275inj=o.G2t({imports:[a.MD,b.G]})}}return m})()}}]);