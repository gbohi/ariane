<section class="auth-page-wrapper py-1 position-relative d-flex align-items-center justify-content-center min-vh-100">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card mb-0">
                    <div class="row g-0 align-items-center">
                        <!--end col-->
                        <div class="col-xxl-6 mx-auto">
                            <div class="card mb-0 border-0 shadow-none mb-0">
                                <div class="card-body p-sm-1 m-lg-4">
                                    <div class="text-center mt-2">
                                        <div class="image text-center">
                                            <img src="assets/images/logo_ubipharmci.png" alt="User" width="200">
                                        </div>
                                        <h5 class="fs-3xl">SIGNALER TOUTE ANOMALIE AU SERVICE DES MOYENS GENERAUX</h5>
                                        <p class="text-muted">Renseignez ce formulaire ci-dessous, l'anomalie sera réçue et traitée.</p>
                                    </div>
                                    <div class="p-2 mt-5">
                                        <form (ngSubmit)="saveProperty()" [formGroup]="besoinForm" class="tablelist-form" novalidate autocomplete="off">
                                            
                                                <div id="alert-error-msg" class="d-none alert alert-danger py-2"></div>
                                                <input type="hidden" id="id-field" formControlName="id">
                            
                                                <div class="mb-3">
                                                    <label for="libelle-input" class="form-label">Titre<span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" formControlName="titre" id="libelle-input" placeholder="" required>
                                                    <div *ngIf="besoinForm.get('titre')?.invalid && besoinForm.get('titre')?.touched" class="text-danger mt-1">
                                                        <small *ngIf="besoinForm.get('titre')?.errors?.['required']">Le titre est requis</small>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="rating-field">
                                                <div class="mb-3">
                                                    <label class="form-label">Selectionner des fichiers<span class="text-danger">*</span></label>
                                                    <dropzone class="dropzone" [config]="dropzoneConfig" [message]="'Drop files here or click to upload.'" (success)="onUploadSuccess($event)"></dropzone>
                                                    @if (uploadedFiles) {
                                                    <ul class="list-unstyled mb-0" id="dropzone-preview">
                                                        @for (file of uploadedFiles; track $index) {
                                                        <li class="mt-2" id="dropzone-preview-list">
                                                            <div class="border rounded">
                                                                <div class="d-flex flex-wrap gap-2 p-2">
                                                                    <div class="flex-shrink-0 me-3">
                                                                        <div class="avatar-sm bg-light rounded p-2">
                                                                            @if (file.dataURL) {
                                                                            <img class="img-fluid rounded d-block" [src]="file.dataURL" alt="Dropzone-Image" />
                                                                            }@else {
                                                                                <img class="img-fluid rounded d-block" [src]="file" alt="Dropzone-Image" />
                                                                            }
                                                                        </div>
                                                                    </div>
                                                                    <div class="flex-grow-1">
                                                                        <div class="pt-1">
                                                                            @if (file.name) {<h5 class="fs-md mb-1">{{ file.name }}</h5>}
                                                                            @if (file.size) {<p class="fs-sm text-muted mb-0">{{ file.size }}</p>}
                                                                        </div>
                                                                    </div>
                                                                    <div class="flex-shrink-0 ms-3">
                                                                        <button (click)="removeFile(file)" class="btn btn-sm btn-danger">Delete</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    }
                                                    </ul>
                                                    <!-- end dropzon-preview -->
                                                }
                                                </div>
                                                <!--<div class="mb-3">
                                                    <label for="course-title-input" class="form-label">Titre<span class="text-danger">*</span></label>
                                                    <input type="text" id="course-title-input" formControlName="titre" class="form-control" placeholder="" required>
                                                </div>-->
                            
                            
                                               <!--  <div class="mb-3">
                                                    <label for="course-category-input" class="form-label">Demandeur<span class="text-danger">*</span></label>
                            
                                                    <select class="form-select" id="course-category-input" formControlName="user">
                                                        @for (data of users; track data.id) {
                                                            <option value="{{data.id}}">{{data.username}}</option>
                                                        }
                                                    </select>
                                                </div>-->
                            
                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <div class="mb-3">
                                                            <label for="status-input" class="form-label">Type de besoin<span class="text-danger">*</span></label>
                                                            <select class="form-select" id="status-input" formControlName="typebesoin">
                                                                @for (data of typebesoins; track data.id) {
                                                                    <option value="{{data.id}}">{{data.libelle}}</option>
                                                                }
                                                            </select>
                                                        </div>
                                                    </div><!--end col-->
                                                    <div class="col-lg-6">
                                                        <div class="mb-3">
                                                            <label for="status-input" class="form-label">Priorité<span class="text-danger">*</span></label>
                                                            <select class="form-select" id="status-input" formControlName="priorite">
                                                                @for (data of priorites; track data.id) {
                                                                    <option value="{{data.id}}">{{data.libelle}}</option>
                                                                }
                                                            </select>
                                                        </div>
                                                    </div><!--end col-->
                                                    <div class="col-lg-12">
                                                        <div class="mb-3">
                                                            <label for="VertimeassageInput" class="form-label">Message</label>
                                                            <textarea class="form-control" id="VertimeassageInput" rows="3"  formControlName="description" placeholder="Enter your message"></textarea>
                                                        </div>
                                                    </div><!--end col-->
                                                </div><!--end row-->
                                                <input type="hidden" id="date-input">

                                            <div class="mt-4">
                                                <button class="btn btn-primary w-100" type="submit" id="add-btn" [disabled]="besoinForm.invalid">Envoyer</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="mt-4 text-center">
                                        <p class="mb-0">Vous avez déjà un compte ? <a routerLink="/auth/login" class="fw-semibold text-primary text-decoration-underline"> Se connecter </a> </p>
                                    </div>
                                </div><!-- end card body -->
                            </div><!-- end card -->
                        </div>
                        <!--end col-->
                    </div>
                    <!--end row-->
                </div>
            </div>
            <!--end col-->
        </div>
        <!--end row-->
    </div>
    <!--end container-->
</section>